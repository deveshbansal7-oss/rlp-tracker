<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>RLP Proposal Tracker</title>
</head>
<body>

<h2>RLP Proposal Tracker â€“ Login</h2>

<input type="email" id="email" placeholder="Enter your email" />
<button onclick="login()">Login</button>

<script>
const API = "https://script.google.com/macros/s/AKfycbyRBNbXMeeCdaNkQjAK_DcCSGY3_L8QIqE5vSwj8_DxXEwZQ8S1P8MOW40dvOQqFhI/exec";

function login() {
  const email = document.getElementById("email").value.trim();

  if (!email) {
    alert("Please enter email");
    return;
  }

  fetch(`${API}?action=login&email=${encodeURIComponent(email)}`)
    .then(res => res.json())
    .then(data => {
      if (data.error) {
        alert(data.error);
      } else {
        localStorage.setItem("user", JSON.stringify(data));
        window.location.href = "dashboard.html";
      }
    })
    .catch(err => {
      alert("API error. Check console.");
      console.error(err);
    });
}
</script>

</body>
</html>
